# 영화 추천 시스템 (Flask 기반)

사용자의 ID를 기반으로 **직업 기반 추천, 나이대 기반 추천, KNN 기반 개인화 추천**을 수행하는 간단한 웹 영화 추천 시스템입니다.

---

## 프로젝트 개요
- 사용자 정보를 입력 받아 추천 수행
- MySQL 데이터베이스를 기반으로 사용자 정보와 영화 정보를 연동
- KNN 기반 개인화 추천: 피어슨 상관계수를 기반으로 유사 사용자 예측
- Flask 웹 프레임워크를 활용한 간단한 웹 UI 구성

---

## 주요 기능

### 1. 직업 기반 영화 추천
- 입력받은 사용자 ID로 해당 사용자의 직업을 조회
- 동일 직업군 유저들이 평균적으로 높은 평점을 준 영화 10개 추천

### 2. 나이대 기반 영화 추천
- 사용자 ID를 통해 나이 정보를 조회
- 해당 사용자의 나이대(10대, 20대 등) 사용자들이 선호한 영화 10개 추천

### 3. KNN 기반 개인화 추천
- 사용자와 유사한 40명의 다른 사용자와의 **피어슨 상관계수**를 기반으로 유사도 계산
- 유사 사용자들이 높게 평가한 영화 중, 현재 사용자가 보지 않은 영화 중 예상 평점이 높은 영화 10개 추천

---

## 사용 기술 및 설명

### Python
- 전체 프로그램 로직 구현 언어로 사용
- Pandas와 Numpy를 활용한 데이터 처리 및 계산 수행

### Flask
- Python 기반 웹 프레임워크
- 사용자로부터 ID를 입력받고 추천 결과를 웹 페이지에 출력
- Jinja2 템플릿 엔진을 사용해 HTML과 연동

### MySQL
- 사용자 정보(user), 영화 정보(movie), 평가 정보(ratings)를 저장
- SQL 쿼리를 통해 특정 유저의 직업/나이 및 평점 정보를 조회하고 추천 로직에 활용

### Pandas 기반 KNN 알고리즘
- `pivot_table`을 통해 사용자-영화 평점 행렬 생성
- 피어슨 상관계수를 기반으로 다른 사용자와의 유사도 계산
- 유사 사용자로부터 보지 않은 영화의 예상 평점 계산
- 예상 평점이 높은 영화 상위 10개를 추천

#### 피어슨 상관계수 계산 방식
- 공통적으로 본 영화에 대해 A, B 유저 간의 평점 벡터를 비교
- 분산과 공분산을 이용한 수식으로 상관관계 계산
- 분모 0 방지를 위해 작은 epsilon 값 추가

---

## 디렉토리 구조
```
.
├── app/
│   ├── __init__.py
│   ├── routes.py
│   ├── main/
│   │   ├── index.py
│   └── templates/
│       ├── base.html
│       ├── index.html
│       └── somepage.html
├── run.py
├── README.md
```

---

## 실행 방법
1. MySQL DB 구성 및 테이블(user, ratings, movie) 준비
2. Flask 서버 실행
```bash
python run.py
```
3. 웹 브라우저에서 `http://localhost:5000` 접속 후, 사용자 ID 입력하여 추천 결과 확인

---

## 기타 사항
- 추천 결과는 텍스트 기반 출력이며, 영화 이미지는 고정 이미지를 사용함
- 추가 페이지 없이 메인 화면에서 모든 추천 기능 제공

---

## 팀 정보
- 구현규(개인 프로젝트)
---

## 참고 사항
- 추천 알고리즘의 수학적 기반: 피어슨 상관계수 기반 협업 필터링
- 복잡한 알고리즘 없이 데이터 연산 위주로 구성하여 간단히 구현
- HTML은 Flask 템플릿 구조를 사용하여 최소한의 UI 제공

(추가적인 코드 예시는 문서 또는 코드 주석에 포함되어 있음)


